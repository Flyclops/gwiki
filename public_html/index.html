<!DOCTYPE html>
<html>
<head>
    <meta charset="utf8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=2.0">
    <title>GWiki</title>
    <link type="text/css" rel="stylesheet" href="/assets/Gwiki.css">
    <script type="text/css" src="/assets/Utils.js"></script>
    <script type="text/css" src="/assets/Gwiki.js"></script>
    <script type="text/css" src="/assets/GwikiUI.js"></script>

    <script type="text/javascript">
        function init() {
            if (typeof Storage == 'undefined') gwiki.block('Sorry, your web browser is too old for this. Please upgrade to something more reasonable.');
            else {
                gapi.client.init({
                    discoveryDocs: ["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],
                    clientId: '885013016646-5lar99giu3cmhqortaivcm8mcd9420os.apps.googleusercontent.com',
                    scope: 'https://www.googleapis.com/auth/drive.readonly'
                }).then(function () {
                    // Instantiate worker objects
                    var ui = new GwikiUI();
                    window.gwiki = new Gwiki({ ui: ui });
                    ui.gwiki = window.gwiki;

                    // Listen for sign-in state changes.
                    //gapi.auth2.getAuthInstance().isSignedIn.listen(toggleInterface);

                    // Handle the initial sign-in state.
                    //toggleInterface(gapi.auth2.getAuthInstance().isSignedIn.get());

                    gwiki.init();
                });
            }
        }
    </script>
</head>
<body>
<div id="gwiki-ui">
</div>
<script async defer src="https://apis.google.com/js/api.js"
    onload="this.onload=function(){};gapi.load('client:auth2', init);"
    onreadystatechange="if (this.readyState === 'complete') this.onload()">
</script>
</body>
</html>
